---
sidebar_position: 2
---

import UUIDGenerator from '@site/src/components/UUIDGenerator'

# Getting Started

The experimental Online (MMO) category is powered by our hosted version of [PartyServer](https://www.npmjs.com/package/partyserver), Cloudflare's PartyKit-inspired scalable server based on [Cloudflare Workers](https://developers.cloudflare.com/workers/).

The best part? You get a complete SDK that handles all the complexity for you. No server programming required!

## Installation

```html
<script type="module">
  import Js13kClient from 'https://esm.sh/js13k-online'

  // Your game code here
  const client = new Js13kClient('my-game-room')
</script>
```

## Your First MMO Game

Let's create a simple multiplayer game where players can move around and see each other:

<div style={{ display: 'flex', justifyContent: 'flex-start', marginBottom: 16 }}>
  <a
    href="https://codesandbox.io/p/sandbox/jmfms6"
    target="_blank"
    style={{
      display: 'inline-flex',
      alignItems: 'center',
      justifyContent: 'center',
      padding: '8px 16px',
      background: '#2563eb',
      color: '#fff',
      borderRadius: '6px',
      textDecoration: 'none',
      fontWeight: 600,
      fontSize: '15px',
      height: '38px',
      lineHeight: 1,
      transition: 'background 0.2s',
    }}
    onMouseOver={(e) => (e.currentTarget.style.background = '#1e40af')}
    onMouseOut={(e) => (e.currentTarget.style.background = '#2563eb')}
  >
    <span>Codesandbox Playground</span>
  </a>
</div>

---

<iframe
  width="640"
  height="400"
  src="https://www.youtube.com/embed/iq8yZbFNuJw"
  title="YouTube video player"
  frameBorder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
></iframe>

---

### Build it step-by-step

#### Step 1 — HTML skeleton

```html
<!DOCTYPE html>
<html>
  <head>
    <title>My First MMO</title>
  </head>
  <body>
    <div id="game"></div>
    <div id="status">Connecting...</div>
    <script type="module"></script>
  </body>
</html>
```

#### Step 2 — Add styles

```html
<style>
  #game {
    width: 640px;
    height: 400px;
    border: 1px solid #ccc;
    position: relative;
  }
  .player {
    width: 20px;
    height: 20px;
    background: blue;
    position: absolute;
    border-radius: 50%;
  }
  .me {
    background: red;
  }
</style>
```

#### Step 3 — Initialize the client

```html
<script type="module">
  import Js13kClient from 'https://esm.sh/js13k-online'

  const gameDiv = document.getElementById('game')
  const statusDiv = document.getElementById('status')
  const playerElements = new Map()

  const client = new Js13kClient('my-awesome-game-v1')

  client.on('connected', () => {
    statusDiv.textContent = 'Connected! Move with arrow keys.'
  })

  client.on('id', (myId) => {
    client.updateMyState({ x: 400, y: 300 })
  })
</script>
```

#### Step 4 — Listen for state updates and connections

```html
<script type="module">
  client.on('delta', () => {
    renderPlayers()
  })

  client.on('state', () => {
    renderPlayers()
  })

  client.on('connect', (playerId) => {
    console.log('Player connected:', playerId)
  })

  client.on('disconnect', (playerId) => {
    const element = playerElements.get(playerId)
    if (element) {
      element.remove()
      playerElements.delete(playerId)
    }
  })
</script>
```

#### Step 5 — Render all players

```html
<script type="module">
  function renderPlayers() {
    const state = client.getState()
    const myId = client.getMyId()
    if (!state.players) return

    Object.entries(state.players).forEach(([playerId, playerState]) => {
      if (playerState.x == null || playerState.y == null) return

      let element = playerElements.get(playerId)
      if (!element) {
        element = document.createElement('div')
        element.className = 'player' + (playerId === myId ? ' me' : '')
        gameDiv.appendChild(element)
        playerElements.set(playerId, element)
      }

      element.style.left = playerState.x + 'px'
      element.style.top = playerState.y + 'px'
    })
  }
</script>
```

#### Step 6 — Handle keyboard input

```html
<script type="module">
  const keys = new Set()
  let moveSpeed = 3

  document.addEventListener('keydown', (e) => {
    keys.add(e.code)
  })

  document.addEventListener('keyup', (e) => {
    keys.delete(e.code)
  })
</script>
```

#### Step 7 — Add the game loop

```html
<script type="module">
  function gameLoop() {
    const myState = client.getMyState()
    if (!myState) {
      requestAnimationFrame(gameLoop)
      return
    }

    let dx = 0,
      dy = 0

    if (keys.has('ArrowLeft') || keys.has('KeyA')) dx = -moveSpeed
    if (keys.has('ArrowRight') || keys.has('KeyD')) dx = moveSpeed
    if (keys.has('ArrowUp') || keys.has('KeyW')) dy = -moveSpeed
    if (keys.has('ArrowDown') || keys.has('KeyS')) dy = moveSpeed

    if (dx !== 0 || dy !== 0) {
      const newX = Math.max(0, Math.min(620, myState.x + dx))
      const newY = Math.max(0, Math.min(380, myState.y + dy))
      client.updateMyState({ x: newX, y: newY })
    }

    renderPlayers()
    requestAnimationFrame(gameLoop)
  }

  gameLoop()
</script>
```

<details>
  <summary>Full example (copy‑paste)</summary>

```html
<!DOCTYPE html>
<html>
  <head>
    <title>My First MMO</title>
    <style>
      #game {
        width: 640px;
        height: 400px;
        border: 1px solid #ccc;
        position: relative;
      }
      .player {
        width: 20px;
        height: 20px;
        background: blue;
        position: absolute;
        border-radius: 50%;
      }
      .me {
        background: red;
      }
    </style>
  </head>
  <body>
    <div id="game"></div>
    <div id="status">Connecting...</div>

    <script type="module">
      import Js13kClient from 'https://esm.sh/js13k-online'

      const gameDiv = document.getElementById('game')
      const statusDiv = document.getElementById('status')
      const playerElements = new Map()

      const client = new Js13kClient('my-awesome-game-v1')

      client.on('connected', () => {
        statusDiv.textContent = 'Connected! Move with arrow keys.'
      })

      client.on('id', (myId) => {
        client.updateMyState({ x: 400, y: 300 })
      })

      client.on('delta', () => {
        renderPlayers()
      })

      client.on('state', () => {
        renderPlayers()
      })

      client.on('connect', (playerId) => {
        console.log('Player connected:', playerId)
      })

      client.on('disconnect', (playerId) => {
        const element = playerElements.get(playerId)
        if (element) {
          element.remove()
          playerElements.delete(playerId)
        }
      })

      function renderPlayers() {
        const state = client.getState()
        const myId = client.getMyId()
        if (!state.players) return

        Object.entries(state.players).forEach(([playerId, playerState]) => {
          if (playerState.x == null || playerState.y == null) return

          let element = playerElements.get(playerId)
          if (!element) {
            element = document.createElement('div')
            element.className = 'player' + (playerId === myId ? ' me' : '')
            gameDiv.appendChild(element)
            playerElements.set(playerId, element)
          }

          element.style.left = playerState.x + 'px'
          element.style.top = playerState.y + 'px'
        })
      }

      const keys = new Set()
      let moveSpeed = 3

      document.addEventListener('keydown', (e) => {
        keys.add(e.code)
      })

      document.addEventListener('keyup', (e) => {
        keys.delete(e.code)
      })

      function gameLoop() {
        const myState = client.getMyState()
        if (!myState) {
          requestAnimationFrame(gameLoop)
          return
        }

        let dx = 0,
          dy = 0

        if (keys.has('ArrowLeft') || keys.has('KeyA')) dx = -moveSpeed
        if (keys.has('ArrowRight') || keys.has('KeyD')) dx = moveSpeed
        if (keys.has('ArrowUp') || keys.has('KeyW')) dy = -moveSpeed
        if (keys.has('ArrowDown') || keys.has('KeyS')) dy = moveSpeed

        if (dx !== 0 || dy !== 0) {
          const newX = Math.max(0, Math.min(620, myState.x + dx))
          const newY = Math.max(0, Math.min(380, myState.y + dy))
          client.updateMyState({ x: newX, y: newY })
        }
        renderPlayers()

        requestAnimationFrame(gameLoop)
      }

      gameLoop()
    </script>
  </body>
</html>
```

</details>

## Room Names

Your `room` parameter creates a private space for your game. All communication is isolated to this room, so choose a unique name:

```js
// Good room names
const client = new Js13kClient('super-mario-battle-2025')
const client = new Js13kClient('chess-masters-js13k')

// Avoid generic names that might conflict
const client = new Js13kClient('game') // Too generic!
const client = new Js13kClient('test') // Others might use this
```

### Generate Unique Room Key

If you're concerned that your room name might not be unique, you can use a room key instead. Here's a guaranteed unique room key just for your game:

<UUIDGenerator />

## What's Next?

- Learn about [Game Loop](./game-loop) to understand the connection flow
- Dive into [Game State Management](./tutorials/game-state) for advanced state handling
